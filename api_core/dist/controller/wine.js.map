{"version":3,"sources":["../../src/controller/wine.js"],"names":["config","db","api","post","req","res","newWine","name","body","type","year","winery","save","err","send","json","message","get","find","wines","findById","params","id","wine","put","Wine","delete","remove","_id"],"mappings":";;;;;;AAAA;;;;AACA;;AACA;;;;;;kBAEe,gBAAkB;AAAA,QAAhBA,MAAgB,QAAhBA,MAAgB;AAAA,QAARC,EAAQ,QAARA,EAAQ;;AAC7B,QAAIC,MAAM,sBAAV;;AAGA;;AAEA;AACAA,QAAIC,IAAJ,CAAS,MAAT,EAAiB,UAACC,GAAD,EAAKC,GAAL,EAAa;AAC1B,YAAIC,UAAU,oBAAd;AACAA,gBAAQC,IAAR,GAAeH,IAAII,IAAJ,CAASD,IAAxB;AACAD,gBAAQG,IAAR,GAAeL,IAAII,IAAJ,CAASC,IAAxB;AACAH,gBAAQI,IAAR,GAAeN,IAAII,IAAJ,CAASE,IAAxB;AACAJ,gBAAQK,MAAR,GAAiBP,IAAII,IAAJ,CAASG,MAA1B;;AAGAL,gBAAQM,IAAR,CAAa,eAAM;AACf,gBAAGC,GAAH,EAAQ;AACJR,oBAAIS,IAAJ,CAASD,GAAT;AACH;AACDR,gBAAIU,IAAJ,CAAS,EAACC,SAAS,0BAAV,EAAT;AACH,SALD;AAMH,KAdD;;AAgBA;AACAd,QAAIe,GAAJ,CAAQ,GAAR,EAAa,UAACb,GAAD,EAAKC,GAAL,EAAc;AACvB,uBAAKa,IAAL,CAAU,EAAV,EAAc,UAACL,GAAD,EAAMM,KAAN,EAAgB;AAC1B,gBAAIN,GAAJ,EAAS;AACLR,oBAAIS,IAAJ,CAASD,GAAT;AACH;AACDR,gBAAIU,IAAJ,CAASI,KAAT;AACH,SALD;AAMH,KAPD;;AASAjB,QAAIe,GAAJ,CAAQ,MAAR,EAAgB,UAACb,GAAD,EAAKC,GAAL,EAAa;AACzB,uBAAKe,QAAL,CAAchB,IAAIiB,MAAJ,CAAWC,EAAzB,EAA6B,UAACT,GAAD,EAAKU,IAAL,EAAa;AACtC,gBAAGV,GAAH,EAAQ;AACJR,oBAAIS,IAAJ,CAASD,GAAT;AACH;AACDR,gBAAIU,IAAJ,CAASQ,IAAT;AACH,SALD;AAMH,KAPD;;AASA;AACArB,QAAIsB,GAAJ,CAAQ,MAAR,EAAgB,UAACpB,GAAD,EAAKC,GAAL,EAAa;AACzB,uBAAKe,QAAL,CAAchB,IAAIiB,MAAJ,CAAWC,EAAzB,EAA6B,UAACT,GAAD,EAAKY,IAAL,EAAc;AACvC,gBAAGZ,GAAH,EAAQ;AACJR,oBAAIS,IAAJ,CAASD,GAAT;AACH;AACDU,iBAAKhB,IAAL,GAAWH,IAAII,IAAJ,CAASD,IAApB;AACAgB,iBAAKX,IAAL,CAAU,eAAM;AACZ,oBAAGC,GAAH,EAAO;AACHR,wBAAIS,IAAJ,CAASD,GAAT;AACH;AACDR,oBAAIU,IAAJ,CAAS,EAACC,SAAQ,yBAAT,EAAT;AACH,aALD;AAMH,SAXD;AAYH,KAbD;AAcAd,QAAIwB,MAAJ,CAAW,MAAX,EAAmB,UAACtB,GAAD,EAAKC,GAAL,EAAY;AAC3B,uBAAKsB,MAAL,CAAY;AACRC,iBAAKxB,IAAIiB,MAAJ,CAAWC;AADR,SAAZ,EAEG,UAACT,GAAD,EAAKU,IAAL,EAAc;AACb,gBAAGV,GAAH,EAAQ;AACJR,oBAAIS,IAAJ,CAASD,GAAT;AACH;AACDR,gBAAIU,IAAJ,CAAS,EAACC,SAAS,cAAV,EAAT;AAEH,SARD;AASH,KAVD;AAWA,WAAOd,GAAP;AACH,C","file":"wine.js","sourcesContent":["import mongoose from 'mongoose'\nimport {Router} from 'express'\nimport Wine from '../model/wine'\n\nexport default ({config ,db}) => {\n    let api = Router()\n\n\n    // CRUD\n\n    //coffee/add\n    api.post('/add' ,(req,res) => {\n        let newWine = new Wine()\n        newWine.name = req.body.name\n        newWine.type = req.body.type\n        newWine.year = req.body.year\n        newWine.winery = req.body.winery\n\n\n        newWine.save(err=> {\n            if(err) {\n                res.send(err)\n            }\n            res.json({message: 'Wine Upload successfully'})\n        })\n    })\n\n    // Wine-READ\n    api.get('/', (req,res)  => {\n        Wine.find({}, (err, wines) => {\n            if (err) {\n                res.send(err)\n            }\n            res.json(wines)\n        }) \n    })\n\n    api.get('/:id', (req,res) => {\n        Wine.findById(req.params.id, (err,wine) =>{\n            if(err) {\n                res.send(err)\n            }\n            res.json(wine)\n        })\n    })\n\n    // v1/coffee/:id - update\n    api.put('/:id', (req,res) => {\n        Wine.findById(req.params.id, (err,Wine) => {\n            if(err) {\n                res.send(err)\n            }\n            wine.name =req.body.name\n            wine.save(err =>{\n                if(err){\n                    res.send(err)\n                }\n                res.json({message:'wine information update'})\n            })\n        })\n    })\n    api.delete('/:id', (req,res)=> {\n        Wine.remove({\n            _id: req.params.id\n        }, (err,wine) => {\n            if(err) {\n                res.send(err)\n            } \n            res.json({message: 'Wine Removed'})\n        \n        })\n    })\n    return api\n}"]}